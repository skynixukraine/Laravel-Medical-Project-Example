!function(e){function t(n){if(s[n])return s[n].exports;var r=s[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var s={};t.m=e,t.c=s,t.d=function(e,s,n){t.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=120)}({120:function(e,t,s){e.exports=s(121)},121:function(e,t,s){var n=s(41).paymentform;$(function(){var e=[].slice;!function(t,s){var n;n=function(){function e(e,s){var n,r,a=this;this.options=t.extend({},this.defaults,s),this.$el=e,r=this.defaults;for(n in r)r[n],null!=this.$el.data(n)&&(this.options[n]=this.$el.data(n));this.createStars(),this.syncRating(),this.$el.on("mouseover.starrr","span",function(e){return a.syncRating(a.$el.find("span").index(e.currentTarget)+1)}),this.$el.on("mouseout.starrr",function(){return a.syncRating()}),this.$el.on("click.starrr","span",function(e){return a.setRating(a.$el.find("span").index(e.currentTarget)+1)}),this.$el.on("starrr:change",this.options.change)}return e.prototype.defaults={rating:void 0,numStars:5,change:function(e,t){}},e.prototype.createStars=function(){var e,t,s;for(s=[],e=1,t=this.options.numStars;1<=t?e<=t:e>=t;1<=t?e++:e--)s.push(this.$el.append("<span class='glyphicon .glyphicon-star-empty'></span>"));return s},e.prototype.setRating=function(e){return this.options.rating===e&&(e=void 0),this.options.rating=e,this.syncRating(),this.$el.trigger("starrr:change",e)},e.prototype.syncRating=function(e){var t,s,n,r;if(e||(e=this.options.rating),e)for(t=s=0,r=e-1;0<=r?s<=r:s>=r;t=0<=r?++s:--s)this.$el.find("span").eq(t).removeClass("glyphicon-star-empty").addClass("glyphicon-star");if(e&&e<5)for(t=n=e;e<=4?n<=4:n>=4;t=e<=4?++n:--n)this.$el.find("span").eq(t).removeClass("glyphicon-star").addClass("glyphicon-star-empty");if(!e)return this.$el.find("span").removeClass("glyphicon-star").addClass("glyphicon-star-empty")},e}(),t.fn.extend({starrr:function(){var s,r;return r=arguments[0],s=2<=arguments.length?e.call(arguments,1):[],this.each(function(){var e;if((e=t(this).data("star-rating"))||t(this).data("star-rating",e=new n(t(this),r)),"string"==typeof r)return e[r].apply(e,s)})}})}(window.jQuery,window),$(function(){return $(".starrr").starrr()});var t="https://api.online-hautarzt.net",s="https://www.online-hautarzt.net";"ita"===config_partner_id&&(s="https://intimarzt.de"),"sna"===config_partner_id&&(s="https://online-dermatologist.net");var r="undefined"!=typeof config_partner_language?config_partner_language:"de",a={1:"Rash",2:"Itching",3:"Swelling",4:"Redness",5:"Pain",6:"Flaking",7:"Mole",8:"Spots",9:"Others"},i={einseitig:"One side",beidseitig:"Both sides","nicht sicher":"Not sure"},o={"weniger als zwei Tage":"Less than 2 days","zwischen 2 bis 6 Tagen":"Between 2 and 6 days","zwischen 1 bis 4 Wochen":"Between 1 and 4 weeks","länger als 1 Monat":"Longer than 1 month","chronisch/permanent":"chronic/permanent","andere Angabe":"Other"};$(".case_search").submit(function(e){e.preventDefault();var s=t+"/api/submissions/"+$(this).find("input")[0].value,n=$("#case_search_error"),a=$("#case_search_error_message");a.text(""),l(),$.get(s,{partner_id:config_partner_id},function(e){c(e.status),"setup"===e.status?(h(e,s),d(e,s)):(p(e,s),h(e,s),_(e),m(e,s)),$("#case_search_data").show(),u()}).fail(function(){a.text("de"===r?"Fallnummer nicht gefunden.":"Case number not found."),n.fadeTo(2e3,500).slideUp(500),u()})});var c=function(e){"setup"===e?($("#tabs-setup").show(),setTimeout(function(){$('#tabs-setup a[href="#case_search_payment"]').tab("show")},250)):($("#tabs-default").show(),setTimeout(function(){$('#tabs-default a[href="#case_search_result"]').tab("show")},250))},u=function(){var e=$("#case-search").outerHeight(!0)+10;window.parent.postMessage({caseSearch:{iframeHeight:e}},"*")},l=function(){$("#tabs-setup").hide(),$("#tabs-default").hide(),$(".case_search_info").text(""),$("#case_search_data").hide(),$("#case_search_answered_by_photo").attr("src",""),$("#case_search_photo_overview").attr("src",""),$("#case_search_photo_closeup").attr("src",""),$("#case_search_photo_closeup2").attr("src",""),$("#case_search_questions_list").html("")},d=function(e,a){n.setUrls(t,s),n.setLanguage(r),n.setStripeClient(Stripe),n.setCreditcardCallbackSuccess(function(){u()}),$("#payment_form_container").show(),n.show(e.transaction_id,config_partner_id)},p=function(e,t){if(e.answered_by){$("#case_search_status_answered").show(),$("#case_search_result_answered").show();var s=f(e.answered_at),n=e.answered_by;$("#case_search_answered_at").text(s.getDate()+"."+(s.getMonth()+1)+"."+s.getFullYear()),$("#case_search_answered_by_photo").attr("src",n.photo_url),$(".case_search_answered_by_name").text((n.title?n.title:"")+" "+n.first_name+" "+n.last_name),$("#case_search_answered_by_city").text(n.city);var a=n.country;"DE"==n.country&&(a="de"===r?"Deutschland":"Germany"),"AT"==n.country&&(a="de"===r?"Österreich":"Austria"),"CH"==n.country&&(a="de"===r?"Schweiz":"Switzerland"),$("#case_search_answered_by_country").text(a),$("#case_search_answer").html(e.answer.replace(/\n/g,"<br>"))}else{$("#case_search_status_open").show(),$("#case_search_result_open").show();var i=parseInt(e.minutesLeft),o=Math.round(i/60),c="";c=i>=0?"de"===r?"Die Bearbeitung erfolgt spätestens in "+o+" Stunden.":"The evaluation takes place within a maximum of "+o+" hours":"de"===r?"Wir müssen uns entschuldigen. Die Bearbeitung ist überfällig seit "+Math.abs(o)+" Stunden.":"We have to apologize. The processing is overdue for "+Math.abs(o)+" hours.",$("#case_search_time_left").text(c),i<0?$("#case_search_time_left").attr("class","text-danger"):$("#case_search_time_left").removeAttr("class","text-danger"),$("#case_search_open").show()}},h=function(e,t){var s=f(e.created_at);$("#case_search_submission_id").text(e.submission_id),$("#case_search_symptoms").text(function(e){var t=e.symptoms;return t=t.sort(function(e,t){return e.order>t.order?1:t.order>e.order?-1:0}),(t=t.map(function(t){var s="en"===r?a[t.id]:t.name;return 9===t.id&&(s+=" ("+e.other_symptoms+")"),s})).join(", ")}(e)),$("#case_search_affected_area").html(e.affected_area.replace(/\n/g,"<br>"));var n="en"===r?o[e.since]:e.since;e.since_other&&"Bitte näher erläutern:"!==e.since_other&&(n+=" ("+e.since_other+")"),$("#case_search_since").html(n.replace(/\n/g,"<br>"));var c=void 0;e.treated?(c="en"===r?"Yes ":"Ja ",c+="("+e.treatment+")"):c="en"===r?"No":"Nein",$("#case_search_treated").html(c.replace(/\n/g,"<br>")),$("#case_search_description").html(e.description.replace(/\n/g,"<br>")),$("#case_search_created_at").text(s.getDate()+"."+(s.getMonth()+1)+"."+s.getFullYear()+", "+s.getHours()+":"+s.getMinutes()+" Uhr"),$("#case_search_side").text("en"===r?i[e.side]:e.side),$("#case_search_gender").text(e.gender),$("#case_search_age").text(e.age),$("#case_search_photo_overview").attr("src",t+"/photo/"+e.overview_image_id+"/600"),$("#case_search_photo_closeup").attr("src",t+"/photo/"+e.closeup_image_id+"/600"),$("#case_search_photo_closeup2").attr("src",t+"/photo/"+e.closeup2_image_id+"/600")},_=function e(s){var n=$("#case_search_questions_list"),a=$("#questions_badge");n.empty(),a.hide(),s.questions.length>0?(s.questions.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)}),$.each(s.questions,function(e,t){var i=void 0;null==t.answered_at?(a.show(),i='<h4 class="warning">'+("en"===r?"My Answer":"Meine Antwort")+'</h4><form class="form-horizontal" id="question_answer"><input type="hidden" id="question_submission_id" name="submission_id" value="'+s.submission_id+'"><input type="hidden" id="question_id" name="question_id" value="'+t.id+'"><div class="form-group"><div class="col-sm-10"><textarea class="form-control" id="answer" name="answer" required rows="3"></textarea><p id="answer_error" style="display: none;" class="text-danger"></p></div><div class="col-sm-2"><button type="submit" id="answer_submit_btn" class="btn btn-primary">'+("en"===r?"Submit":"Senden")+"</button></div></div></form>"):i="<blockquote><p>"+t.answer.replace(/\n/g,"<br>")+"</p><footer>Meine Antwort vom "+new Date(t.answered_at).toLocaleString("de-DE")+"</footer></blockquote>";var o='<div class="question_wrapper"><div class="question"><blockquote><p>'+t.question.replace(/\n/g,"<br>")+"</p><footer>"+t.asked_by.title+" "+t.asked_by.first_name+" "+t.asked_by.last_name+" - "+new Date(t.created_at).toLocaleString("de-DE")+'</footer></blockquote></div><div class="answer">'+i+"</div></div>";$(o).appendTo(n)}),$("#case_search_questions_list").show(),$("#question_answer").submit(function(n){n.preventDefault(),$("#answer_submit_btn").prop("disabled",!0);var r=$("#question_submission_id").val(),a=$("#question_id").val(),i=t+"/api/submission/"+r+"/question/"+a+"/answer",o=$("#answer_error");o.text("").hide(),$.post(i,$(this).serialize()).done(function(t){s.questions=s.questions.map(function(e){return e.id===parseInt(a)&&(e.answered_at=g(new Date),e.answer=$("#answer").val()),e}),e(s),u()}).fail(function(e,t,s){$("#answer_submit_btn").prop("disabled",!1);var n=e.responseJSON.errors;n.answer&&o.text(n.answer[0]).show(),u()})})):$("#case_search_questions_none").show()},m=function(e,s){e.answered_by?e.stars?($("#case_search_evaluation_answered").show(),$("#case_search_evaluation_answered_stars").text(e.stars+"/5"),$("#case_search_evaluation_answered_feedback").text(e.feedback)):($("#submission_stars").val(""),$("#submission_feedback").val(""),$("#stars").on("starrr:change",function(e,t){$("#submission_stars").val(t)}),$("#case_search_evaluation_form").show().submit(function(s){s.preventDefault();var n=t+"/api/submission/"+e.submission_id+"/evaluate/",r=$("#evaluation_error_stars"),a=$("#evaluation_error_feedback");r.text("").hide(),a.text("").hide(),$.post(n,$(this).serialize()).done(function(e){$("#case_search_evaluation_form").hide(),$("#case_search_evaluation_answered_stars").text(e.stars+"/5"),$("#case_search_evaluation_answered_feedback").text(e.feedback),$("#case_search_evaluation_answered").show(),u()}).fail(function(e,t,s){var n=e.responseJSON.errors;n.feedback&&a.text(n.feedback[0]).show(),n.stars&&r.text(n.stars[0]).show(),u()})})):$("#case_search_evaluation_open").show()},f=function(e){var t=e.replace(/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/,"$1 $2 $3 $4 $5 $6").split(" ");return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])},g=function(e){return e=e.getUTCFullYear()+"-"+("00"+(e.getUTCMonth()+1)).slice(-2)+"-"+("00"+e.getUTCDate()).slice(-2)+" "+("00"+e.getUTCHours()).slice(-2)+":"+("00"+e.getUTCMinutes()).slice(-2)+":"+("00"+e.getUTCSeconds()).slice(-2)};window.onload=function(){u()},$(window).resize(u),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){u()})})},41:function(e,t){var s={api_url:null,web_url:null,language:"de",stripeClient:null,pricingTable:null,selectedResponsetime:null,submission_amount:null,transaction_id:null,partner_id:null,zahlweise:"creditcard",creditcardCallbackSuccess:null,setUrls:function(e,t){this.api_url=e,this.web_url=t},setLanguage:function(e){this.language=e},setStripeClient:function(e){this.stripeClient=e},setCreditcardCallbackSuccess:function(e){this.creditcardCallbackSuccess=e},show:function(e,t){this.transaction_id=e,this.partner_id=t;var s=this,n=this.api_url+"/api/pricingtable";$.ajax({url:n,async:!1,data:{partner_id:this.partner_id},success:function(e){s.pricingTable=e,s.pricingTable.sort(function(e,t){var s=e.responsetime,n=t.responsetime;return s===n?0:s<n?1:-1}),s.submission_amount=$.grep(s.pricingTable,function(e){return!0===e.selected})[0].price,s.selectedResponsetime=$.grep(s.pricingTable,function(e){return!0===e.selected})[0].responsetime,s.createPricingSelector(),s.registerPaymentSelectionChange(),s.createStripeClient(),s.updateSubmitButton()}})},createPricingSelector:function(){if($("#submission_responsetime_wrapper").html(""),1===this.pricingTable.length){$('<input type="hidden" class="form-control" id="submission_responsetime" name="responsetime">').val(this.pricingTable[0].responsetime).appendTo($("#submission_responsetime_wrapper"));var e="de"===this.language?"Maximal "+this.pricingTable[0].responsetime+"h (Durchschnittlich weniger als 60 Minuten)":"A few hours (maximum "+this.pricingTable[0].responsetime+"h)";$('<p class="form-control-static" id="submission_responsetime_display">').text(e).appendTo($("#submission_responsetime_wrapper"))}else{var t=this;this.pricingTable.forEach(function(e){var s=$('<input type="radio" name="responsetime" id="responsetime_'+e.responsetime+'" value="'+e.responsetime+'"/>');e.selected&&s.prop("checked",!0),s.on("change",function(e){t.selectedResponsetime=parseInt(this.value),t.submission_amount=$.grep(t.pricingTable,function(e){return e.responsetime===t.selectedResponsetime})[0].price,t.updateSubmitButton()});var n=$('<label for="responsetime_'+e.responsetime+'" class="radio" />'),r="de"===t.language?"Maximal "+e.responsetime+" Stunden ("+e.price.toLocaleString()+" €)":"Maximum "+e.responsetime+" hours ("+e.price.toLocaleString()+" €)";n.text(r).prepend(s).appendTo($("#submission_responsetime_wrapper"))})}},updateSubmitButton:function(){var e=void 0;"creditcard"===this.zahlweise&&(e="de"===this.language?this.submission_amount.toFixed(2).toLocaleString()+" € per Kreditkarte bezahlen":"Pay "+this.submission_amount.toFixed(2).toLocaleString()+" € by credit card"),"sofort"===this.zahlweise&&(e="de"===this.language?this.submission_amount.toFixed(2).toLocaleString()+" € mit Sofortüberweisung bezahlen":"Pay "+this.submission_amount.toFixed(2).toLocaleString()+" € with Sofortüberweisung"),$("#payment_submit_text").text(e),"sofort"===this.zahlweise&&$("#payment_form").attr("target","_top"),"creditcard"===this.zahlweise&&$("#payment_form").removeAttr("target")},registerPaymentSelectionChange:function(){var e=this;$("input:radio[name=zahlweise]").change(function(t){e.zahlweise=$(this).val(),$(".stripe-payment-method").hide(),$("#stripe-payment-"+$(this).val()).show(),e.updateSubmitButton()})},processCreditcard:function(e){var t=this.api_url+"/api/stripe/createCheckoutSession";$.post(t,{transaction_id:this.transaction_id,responsetime:this.selectedResponsetime}).done(function(t){e.redirectToCheckout({sessionId:t.session_id}).then(function(e){})}).fail(function(e){var t=e.responseJSON.errors,s=document.getElementById("card-errors");t&&(t.creditcard?s.textContent=t.creditcard[0]:s.textContent="de"===this.language?"Ein Fehler ist aufgetreten.":"An error occurred.")}).always(function(){$("#payment_submit").prop("disabled",!1),$("#payment_spinner").hide()})},processSofort:function(e){e.createSource({type:"sofort",amount:Math.round(100*this.submission_amount),currency:"eur",sofort:{country:"DE",preferred_language:"de"},redirect:{return_url:this.web_url+"/sofort?transaction_id="+this.transaction_id+"&version=web&partner_id="+this.partner_id+"&responsetime="+this.selectedResponsetime}}).then(function(e){if(e.error){$("#payment_submit").prop("disabled",!1),$("#payment_spinner").hide();var t=void 0;t="payment_method_not_available"===e.error.type?"Sofortüberweisung ist leider aktuell nicht verfügbar.":(e.error.type,"Leider ist ein Fehler aufgetreten. Bitte versuchen Sie Kreditkartenzahlung."),$("#sofort_error").show().text(t)}if(e.source&&"pending"===e.source.status){var s=e.source;top.location.href=s.redirect.url}})},createStripeClient:function(){var e=$("#stripe-payment-creditcard").data("stripekey"),t=this.stripeClient(e),s=this;$("#payment_form").submit(function(e){e.preventDefault(),$("#payment_submit").prop("disabled",!0),$("#payment_spinner").show(),"creditcard"===s.zahlweise&&s.processCreditcard(t),"sofort"===s.zahlweise&&s.processSofort(t)})}};t.paymentform=s}});